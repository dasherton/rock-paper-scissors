<!DOCTYPE html>
<html>
	<head>
		<title>Rock, paper, scissors</title>
		<meta charset="UTF-8">
	</head>
	<body>
		<script>
			const ROCK = 'rock';
			const PAPER = 'paper';
			const SCISSORS = 'scissors';

			const LOST = 0;
			const DRAW = 1;
			const WON  = 2;

			function computerPlay()
			{
				const r = Math.random();

				if(r < 0.3)
				{
					return ROCK;				
				}
				else if(r < 0.6)
				{
					return PAPER;
				}
				else 
				{
					return SCISSORS;
				}
			}

			function playRound(playerSelection, computerSelection)
			{
				if(playerSelection === ROCK)
				{
					switch(computerSelection)
					{
						case ROCK: return DRAW;
						case PAPER: return LOST;
						case SCISSORS: return WON;
					}
				}
				else if(playerSelection === PAPER)
				{
					switch(computerSelection)
					{
						case ROCK: return WON;
						case PAPER: return DRAW;
						case SCISSORS: return LOST;
					}
				}
				else // playerSelection === SCISSORS
				{
					switch(computerSelection)
					{
						case ROCK: return LOST;
						case PAPER: return WON;
						case SCISSORS: return DRAW;
					}
				}
			}

			function standardiseSelection(selection)
			{
				return selection.toLowerCase();
			}

			function isValidSelection(selection)
			{
				switch(lowerSelection)
				{
					case ROCK:
					case PAPER:
					case SCISSORS:
						return true;

					default:
						return false;
				}
			}

			let playerSelection;

			do
			{
				const selection = prompt('Your selection: ');
				playerSelection = standardiseSelection(selection);

			} while( !isValidSelection(playerSelection) )

			const computerSelection = computerPlay();

			console.log(`You play: ${playerSelection}`);
			console.log(`Computer plays: ${computerSelection}`);

			const result = playRound(playerSelection, computerSelection);

			if(result === WON)
			{
				alert(`You won!  ${playerSelection} beats ${computerSelection}`);
			}
			else if(result === DRAW)
			{
				alert(`You drew.  The computer also chose ${computerSelection}`);
			}
			else
			{
				alert(`You lost!  The computer chose ${computerSelection}}`);
			}
		</script>
	</body>
</html>
